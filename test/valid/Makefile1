.PHONY: test_main \
	test_two_functions

all: test_main \
	test_ret_non_zero \
	test_var_ref \
	test_two_vars

test_main: main.x
	@../../$(BOA) main.x > /dev/null
	gcc out.s
	./a.out; \
	if [ $$? -eq 0 ]; then \
		echo "Success"; \
	else \
		echo "Failed"; \
	fi

test_ret_non_zero: return_non_zero.x
	@../../$(BOA) return_non_zero.x > /dev/null
	gcc out.s
	./a.out; \
	if [ $$? -eq 5 ]; then \
		echo "Success"; \
	else \
		echo "Failed"; \
	fi 

test_var_ref: var_ref.x
	@../../$(BOA) var_ref.x > /dev/null
	gcc out.s
	./a.out; \
	if [ $$? -eq 5 ]; then \
		echo "Success"; \
	else \
		echo "Failed"; \
	fi

test_two_vars: two_vars.x
	@../../$(BOA) two_vars.x > /dev/null
	gcc out.s
	./a.out; \
	if [ $$? -eq 2 ]; then \
		echo "Success"; \
	else \
		echo "Failed"; \
	fi
